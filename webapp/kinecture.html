<head>
  <title>Kinecture</title>
</head>

<body>
  <div class="container">
    <header>
      <h1>Kinect Angles</h1>
    </header>

    {{#if showAdminPanel}}
    <button type="button" class="btn" id="hideAdminPanel">Hide Admin Panel</button>
    {{> controls}}

    <table class="table">
      <tr>
        <th>name</th>
        <th>left</th>
        <th>right</th>
        <th>dx</th>
        <th>dy</th>
        <th>dtheta</th>
        <th>timestamp</th>
        <th>angle</th>
        <th>confidence</th>
        <th>loudness</th>
        <th>speech</th>
        <th>custom_speech</th>
        <th>silence</th>
        <th>bins</th>
      </tr>
      {{#each kinects}}
        {{> kinect}}
      {{/each}}
    </table>
    {{else}}
      <button type="button" class="btn" id="showAdminPanel">Show Admin Panel</button>
    {{/if}}

    <div>
      Intersection: {{intersection}}<br>
      Delay Frame: {{delayframe}}<br>
      Delay Average: {{delayaverage}}<br>
      Delay Average Abs: {{absdelay}}<br>
      Notification State: {{notestate}}
    </div>

    {{> graph}}
  </div>
</body>

<template name="controls">
  <form class="form-inline" role="form">
      <button type="button" class="btn btn-danger" id="deleteEverything" style="display:none">Delete Everything</button>

      <button type="button" class="btn" id="randomize">Pseudorandomize data</button>

      <button type="button" class="btn" id="vibrate">Vibrate device</button>
      {{> room}}
    </form>
</template>

<template name="kinect">
  <tr>
    <td>{{name}}</td>
    <td>
      <button type="button" class="btn setleft {{#if left}}active{{/if}}">Left</button>
    </td>
    <td>
      <button type="button" class="btn setright {{#if right}}active{{/if}}">Right</button>
    </td>
    <td>
      <input type="number" name="dx" value="{{dx}}" class="dx">
    </td>
    <td>
      <input type="number" name="dy" value="{{dy}}" class="dy">
    </td>
    <td>
      <input type="number" name="dtheta" value="{{dtheta}}" class="dtheta">
    </td>
    <td>{{timestamp}}</td>
    <td>{{fixed angle}}&deg;</td>
    <td>{{fixed confidence}}</td>
    <td>{{fixed loudness}}</td>
    <td>{{speech}}</td>
    <td>{{custom_speech}}</td>
    <td>{{silence}}</td>
    <td>{{bins_fixed}}</td>
  </tr>
</template>

<template name="graph">
  <svg id="graph">
  </svg>
</template>

<template name="room">
  {{#with defaultRoom}}
  <label>
    Length
    <input type="number" class="length" value="{{length}}">
  </label>
  <label>
    Width
    <input type="number" class="width" value="{{width}}">
  </label>
  {{/with}}
</template>
